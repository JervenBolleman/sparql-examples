@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-b6407e745297c0c01c347c50ffd75cff> a sh:SPARQLExecutable,
    sh:SPARQLSelectExecutable;
  sh:select """# This query has two different features:
# First, it is able to search for municipalities which are part of two different states, looking to P527
# Second, it doesn't show former municipalities, filtering the old ones from the P582 statement.
SELECT DISTINCT ?udalerri ?udalerriLabel WHERE { 
  ?udalerri p:P31 ?status.
  ?udalerri wdt:P131*/^wdt:P527 wd:Q47588 .
  {?status ps:P31 wd:Q484170.} UNION {?status ps:P31 wd:Q2074737}
  MINUS {?status pq:P582 ?old .}
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"eu,es,fr,en\". }
}""";
  dcterms:isPartOf <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/th>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eu>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en-gb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/vec>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/hy>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/id>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/be-tarask>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/tr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ro>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/he>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/zh>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pt-br>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/si>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eo>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/da>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ar>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ko>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ms>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/sv>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lt>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/nl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ca>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/uk>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/it>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ja>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/es>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/cs>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ru>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/de>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/fr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:wikidata_prefixes, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-wikidata_prefixes,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-8B0B781460F1DC10AB8ED51D87113E28, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-85AB1135D5ED9E05E0A5CA4EA7FD0A60,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-F32DAF5ED22F0F4A4AD613E186B344EA, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-358AE5F8374FFD82B28FAAF6C3C2FC87,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-493E225707B5E4C90962A5A9B89A14B4, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-0886BF3F759FB99AC18BB0A011AE338D,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-6CB1C9239FE25830DE6EA1CD942EA4BA, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-693146FD6984C76AD43046812F344661,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-B60428EAEA3E14BCE24E8EE4D6A4B91B, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-6F37414CBDFC11D5B0834051C31C87EA,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-F063B6A7BFB53BA6F14FC55E27D167A4, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-D8E6F2C302B7712B9317851A5B61BBC7,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-4B43FA86A2EC4E9FAEDBCAFEE966ACB2, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-2FE63BC17378A30A2111223E12D65D10,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-C7DD3FE4099FAC1295B7302DC990ED95, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-F85377CA80AC2C9D519EFF0FB73AD351,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-943FAF574D635CD058E4F255CF14E7C5, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-B26A13472E96587754DD21BA92FF679E,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-F0B582702AAC301F0E8446C7F5C82FD4, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-C9122E6A90306DB993523F7B67171A44,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-E9C3EB009D0E7FF0D67B5A567EAD2FA0, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-73ABC9DFF2C6EFD0B6A99DED05697F2F,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-5BB3E21A0690C370DA79F3DA8FCD51EC, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-7EEB6CC9FE0BFABE042681A89C0C8D2C,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-E398640D6DF292F4F85969EA00CB691E, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-64BEABB69BF946EABF111DE29EEA90AE,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-8DB3201CF20DB49A6B7C4139530A0590, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-0A96DD81FDF874382F95BDAB4CF485DD,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-C2EAB838A137AC375022022F68D762D8, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-C0A87EB8C93499A14A1BA26257659FAA,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-B4A53CD03497A4EC115A88F2731754C6, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115646-8C8960824220FBAB67520F3470C29C0A;
  schema:target <https://query.wikidata.org/sparql/> .
