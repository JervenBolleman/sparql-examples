@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-3e95cbf6fee3e66c6670f4e02a66b88c> a sh:SPARQLExecutable,
    sh:SPARQLSelectExecutable;
  sh:select """#TEMPLATE={\"template\":\"metro station of ?city\",\"variables\":{\"?city\":{\"query\":\"SELECT DISTINCT ?cityLabel where {?city wdt:P31/wdt:P279* wd:Q1637706. SERVICE wikibase:label { bd:serviceParam wikibase:language \\\"[AUTO_LANGUAGE],mul,en\\\"} }\"} } }
#defaultView:Map{\"hide\":[\"?comm1Label\",\"?coord1\", \"?comm2\",\"coord2\",\"?layer\",\"?str\",\"?line\", \"?rgb\"],\"layer\":\"?connectingLine1Label\"}
SELECT ?comm1 ?comm1Label ?coord1 ?comm2 ?coord2 ?line ?connectingLine1 ?connectingLine1Label ?layer ?rgb WHERE {
  BIND(wd:Q8686 AS ?city)
  ?comm1 wdt:P31/wdt:P279* wd:Q928830 ;
         wdt:P131*/wdt:P279* ?city;
         wdt:P625 ?coord1 ;
         wdt:P81 ?connectingLine1;
         wdt:P197 ?comm2 .
  ?connectingLine1 wdt:P465 ?rgb.
  ?comm2 wdt:P81 ?connectingLine2;
         wdt:P625 ?coord2 .
  FILTER (?connectingLine1 = ?connectingLine2)

  ?comm1 p:P625 [# ps:P625 [];
                  psv:P625 [ wikibase:geoLongitude ?coord1lon; wikibase:geoLatitude ?coord1lat; ] ] .
  ?comm2 p:P625 [# ps:P625 [];
                  psv:P625 [ wikibase:geoLongitude ?coord2lon; wikibase:geoLatitude ?coord2lat; ] ] .

  BIND(CONCAT('LINESTRING (', STR(?coord1lon), ' ', STR(?coord1lat), ',', STR(?coord2lon), ' ', STR(?coord2lat), ')') AS ?str) .
  BIND(STRDT(?str, geo:wktLiteral) AS ?line) .
  BIND(?connectingLine1 AS ?layer)

  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],mul,en\". }
}

ORDER BY (?connectingLine1Label)""";
  dcterms:isPartOf <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/th>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eu>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en-gb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/vec>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/hy>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/id>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/be-tarask>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/tr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ro>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/he>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/zh>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pt-br>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/si>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eo>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/da>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ar>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ko>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ms>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/sv>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lt>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/nl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ca>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/uk>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/it>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ja>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/es>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/cs>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ru>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/de>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/fr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:wikidata_prefixes, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-wikidata_prefixes,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-84D003751EB4C5BE0812155A3A02D443, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-54C08E18B8EFDE3FB3AF5C0A4DA0106B,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-0B5D702AAD8EC88F73D0A14B2F2D68B8, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-5A88894DF0DA367BA4799A73B8E6B27B,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-72BB935FD044F5FEC2B04F9B741AED49, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-CDBBCB5A62C6A9F8D65E0116A73D10F8,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-5D906B25B7F19B798FA2BBDD562F7E5B, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-BB527C0F17746FE6F93A989D9B3A441F,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-B61119670FC0B099DFB3DAE99D9723A8, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-6502825F68823E873B44465B47FB29BE,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-18306B97645BFCE20B0681DFEADD09C1, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-EBE87D67C6EF3E6555D6427B072FC21F,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-940285A786AB4C1C2888CF7E6456B052, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-909655DED9FE74F08578E58BB95A9D79,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-077C8D1DF200E011A58DAFB339B6B986, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-1D29777A6DC2EBC90245A3AADAFE85C9,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-357B0268D649FDB3779862014B5A17A0, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-BFDD9C1640D9DFF7924CAF0018FD5898,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-5842EAE4552C8B4BBD6B253DD2A8CC43, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-D5BE7602C7B62C6AF4D6726A19BBA9C3,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-3741F702FBD75A19EC7D79B524F9BA1C, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-A7EE81326F41D14E8364BF8032021C2A,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-C6082B4B4FB004F752A81E711E020B5D, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-0CE17C14F382F7E316D0C5D5145F0062,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-E00B6A7A1228B4C036D0E7ABDC4603FE, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-8490C704E8773E0D98D6676FA49E67FF,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-4C122253DA54210266FB2F47C51CD4CA, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-60E10965EE4DBEFB33B1682AFD47F02E,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-C51A3142F214A4F9329A55C4F213E8C5, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-0A02A4E73ABF0F763000FC1E6CCE1F6D,
    _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-B60F602EA290C92053B21737439B9213, _:genid-9eb55b2583ef4ad09d9d48ff9f18ffec115610-6233E900AB6F0301BA1A369AFE4D2F91;
  schema:target <https://query.wikidata.org/sparql/> .
